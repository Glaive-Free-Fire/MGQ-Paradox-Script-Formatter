# RB_Script_AutoFormatter

## Описание

RB_Script_AutoFormatter - это инструмент для автоматического форматирования текстовых описаний в правильный формат данных для RPG Maker VX Ace. Скрипт создан специально для работы с переводом игры "もんむす・くえスト！RPG終章" (Monmusu Quest! RPG Final Chapter), которая использует специфический формат хранения описаний персонажей, предметов и другого игрового контента.

Инструмент позволяет преобразовать обычный текст с описаниями в структурированные блоки данных, совместимые с форматом сохранения RPG Maker VX Ace, автоматически учитывая максимальную длину строк, сохраняя специальные форматы текста (широкие пробелы) и правильно обрабатывая различные разделы описаний (Экипировка, Навыки, Способности).

## Функциональность

- **Два режима работы**: 
  - Library(Enemy) - для форматирования описаний противников
  - JobChange - для форматирования описаний профессий/классов персонажей

- **Поддержка двух языков**:
  - RUS - для русского перевода
  - JAP - для японского оригинала

- **Настраиваемые параметры форматирования**:
  - Регулируемая длина строки для каждого режима и языка
  - Корректное сохранение широких пробелов (　) между элементами списков
  - Автоматическое разделение длинных описаний на строки подходящей длины

- **Специальные возможности форматирования**:
  - Обработка блоков "Экипировка", "Навыки", "Способности" с сохранением структуры
  - Поддержка блоков иллюстраций с префиксами на русском и японском языках
  - Правильное экранирование кавычек в выходных данных

## Использование

### Базовое использование

1. Откройте HTML-файл скрипта в любом современном браузере
2. Выберите нужный режим работы (Library/JobChange)
3. Выберите язык (RUS/JAP)
4. Вставьте исходный текст в поле ввода
5. Отформатированный результат появится в правой части экрана
6. При необходимости нажмите кнопку "Копировать результат" для копирования отформатированного текста

### Структура исходного текста

#### Примеры для режима Library(Enemy)

**Пример на русском языке:**
```
766
Одна из кукол Владык Монстров, созданная Кагэцугуми из тел прежних правительниц. Поскольку эту Владыку прославляли за красоту, подобную небесной деве, Кагэцугуми постаралась максимально точно воспроизвести её прижизненную красоту. Благодаря влиянию матери в ней проявились драконьи черты, что делает её физически крайне выносливой. Её отточенное мастерство владения мечом ничуть не уступает тому, каким оно было при жизни.
Иллюстрация： UN_DO
```

**Пример на японском языке:**
```
766
影紬が歴代魔王の屍を素材に造り上げた魔王人形のうちの一体。天女の如く美しい魔王と讃えられていたので、影紬は生前の美しさを可能な限り再現する形で仕上げたという。母親の影響で竜の特質が発現しており、肉体的にも極めて頑丈。その練達した刀さばきは、生前と比べて微塵も衰えていないという。
```

**Более подробный пример с разделами:**
```
237 # Минотавр
Сильный монстр, обладающий мощью дикого быка. Умело обращается с топором.
Высокая защита компенсирует недостаток скорости и магической защиты.

Экипировка: Кэйкоги　Нагрудник　Шляпа　Роскошный венец
Навыки: Топоры　Дубины　Железный шар　Тех. Зверя
Способности: Нет
```

#### Примеры для режима JobChange

**Пример на русском языке:**
```
65 # Ниндзя
Восточный убийца, живущий и умирающий в тени. Эффективно прерывает жизнь врагов уникальными техниками, известными как ниндзюцу. Также обладает огромной атакующей силой благодаря уникальному стилю с оружием в обеих руках. Обладает чрезвычайно высокой скоростью и уклонением, но низкой выносливостью и защитой.
Экипировка: Кинжал　Ниндзято　Кама
Навыки: Ниндзюцу
Способности: Парное Оружие　Возможность экипировки кэйкоги
```

**Пример на японском языке:**
```
65 # 忍者
闇に生き、闇に死する東方の暗殺者忍術と呼ばれる独特の技で、効率よく敵の命を絶つまた両手に武器を持つ独特のスタイルにより、攻撃力も絶大素早さや回避率は極めて高いが、体力や防御力は低い事に注意
装備武器：短剣　忍者刀　鎌
スキル：忍術
アビリティ：二刀流　武道着装備可能
```

### Важные особенности форматирования

#### Идентификатор и заголовок

- Формат начинается с числового идентификатора
- Для JobChange после идентификатора следует символ `#` и название класса/профессии
- Для Library может быть просто числовой идентификатор без названия

#### Широкие пробелы

- В исходных данных используются японские широкие пробелы `　` для разделения элементов в списках
- Эти пробелы необходимо сохранять, так как они используются игрой для корректного разделения элементов
- Скрипт автоматически обрабатывает и сохраняет эти пробелы в выходных данных

#### Секции описания

Для корректного форматирования важно правильно обозначать начало каждой секции:

- **Экипировка:** или **Экипировка：** (с японским двоеточием)
- **Навыки:** или **Навыки：**
- **Способности:** или **Способности：**

На японском:
- **装備武器：**
- **スキル：**
- **アビリティ：**

### Настройка длины строки

- Используйте кнопки "+" и "-" в секции "ДЛИНА СТРОКИ" для изменения максимальной длины строки
- Для каждого режима и языка максимальная длина строки устанавливается независимо
- Рекомендуемые значения:
  - RUS (Library): 39-45 символов
  - JAP (Library): 20-25 символов
  - JobChange: 30-35 символов

## Особенности форматирования

### Выходной формат данных

Скрипт автоматически преобразует исходный текст в структуру, совместимую с RPG Maker VX Ace. Пример выходного формата:

```
237 => # Минотавр
  [[
    "Сильный монстр, обладающий мощью дикого быка. Умело",
    "обращается с топором. Высокая защита компенсирует",
    "недостаток скорости и магической защиты.",
],
[
    "Экипировка: Кэйкоги　Нагрудник　Шляпа　Роскошный венец",
    "Навыки: Топоры　Дубины　Железный шар　Тех. Зверя",
    "Способности: Нет",
  ]],
```

### Автоматический перенос

При превышении максимальной длины строки текст автоматически переносится на следующую строку с соблюдением корректных отступов.

### Обработка иллюстраций

Строки, начинающиеся с префикса "Иллюстрация:" или "イラスト：", обрабатываются специальным образом и помещаются в конец описания.

## Установка

1. Скачайте файл `Script_for_packing.html`
2. Откройте файл в любом современном веб-браузере
3. Никаких дополнительных установок или зависимостей не требуется

## Требования

- Современный веб-браузер с поддержкой JavaScript
- Поддержка кодировки UTF-8 для корректной работы с широкими пробелами и японскими символами

## Контрибуция

Вклады в проект приветствуются! Если у вас есть идеи по улучшению форматирования или новым функциям, создавайте Issue или Pull Request.

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для деталей.

---

**Примечание**: Скрипт создан специально для работы с переводом игры "もんむす・くえスト！RPG終章" и может потребовать модификации для использования с другими проектами RPG Maker.
